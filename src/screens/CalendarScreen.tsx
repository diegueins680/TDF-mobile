import React, { useMemo, useState } from 'react';
import { View, Text, Pressable, ScrollView, Linking } from 'react-native';
function daysInMonth(year: number, monthIndex: number) { return new Date(year, monthIndex + 1, 0).getDate(); }
function startWeekday(year: number, monthIndex: number) { return new Date(year, monthIndex, 1).getDay(); }
const monthNames = ['January','February','March','April','May','June','July','August','September','October','November','December'];
export default function CalendarScreen(){ const now = new Date(); const [year, setYear] = useState(now.getFullYear()); const [month, setMonth] = useState(now.getMonth()); const grid = useMemo(() => { const first = startWeekday(year, month); const dim = daysInMonth(year, month); const cells = []; for (let i=0;i<first;i++) cells.push({d:null}); for (let d=1; d<=dim; d++) cells.push({d}); while (cells.length % 7 !== 0) cells.push({d:null}); return cells; }, [year, month]); const goto=(delta:number)=>{ const dt=new Date(year, month+delta, 1); setYear(dt.getFullYear()); setMonth(dt.getMonth()); }; return (<ScrollView contentContainerStyle={{padding:16}}><View style={{flexDirection:'row',justifyContent:'space-between',alignItems:'center',marginBottom:12}}><Pressable onPress={()=>goto(-1)}><Text>◀</Text></Pressable><Text style={{fontSize:20,fontWeight:'600'}}>{monthNames[month]} {year}</Text><Pressable onPress={()=>goto(1)}><Text>▶</Text></Pressable></View><View style={{flexDirection:'row',marginBottom:6}}>{['Sun','Mon','Tue','Wed','Thu','Fri','Sat'].map((w)=>(<View key={w} style={{flex:1,alignItems:'center'}}><Text style={{fontWeight:'600',opacity:0.7}}>{w}</Text></View>))}</View><View style={{flexDirection:'row',flexWrap:'wrap'}}>{grid.map((cell:any,i:number)=>{ const isToday = cell.d && year===now.getFullYear() && month===now.getMonth() && cell.d===now.getDate(); return (<View key={i} style={{width:'14.2857%',borderWidth:1,borderColor:'#e5e7eb',minHeight:64,padding:6,backgroundColor:isToday?'#f0f9ff':'#fff'}}><Text style={{textAlign:'right',fontSize:12,fontWeight:'600',opacity:cell.d?1:0}}>{cell.d ?? ''}</Text></View>); })}</View><View style={{marginTop:16,alignItems:'flex-end'}}><Pressable onPress={()=>Linking.openURL('https://cal.com/YOUR_HANDLE/domo-rental')} style={{paddingVertical:8,paddingHorizontal:12,borderWidth:1,borderColor:'#111',borderRadius:8}}><Text>Solicitar fecha</Text></Pressable></View></ScrollView>); }